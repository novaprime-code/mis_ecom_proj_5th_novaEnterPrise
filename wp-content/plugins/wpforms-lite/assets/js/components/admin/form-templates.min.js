"use strict";var WPFormsFormTemplates=window.WPFormsFormTemplates||function(e,g){var w={},h={init:function(){g(h.ready),g(e).on("load",function(){"function"==typeof g.ready.then?g.ready.then(h.load):h.load()})},ready:function(){h.setup(),h.events()},load:function(){h.showUpgradeBanner()},setup:function(){w.templateList=new List("wpforms-setup-templates-list",{valueNames:["wpforms-template-name","wpforms-template-desc",{name:"slug",attr:"data-slug"},{name:"categories",attr:"data-categories"},{name:"has-access",attr:"data-has-access"},{name:"favorite",attr:"data-favorite"}]})},events:function(){g("#wpforms-setup-templates-list").on("click",".wpforms-template-favorite i",h.selectFavorite)},selectFavorite:function(e){function t(){u.favorite=!1,f-=1,d.values(u),v(),n.data("data-favorite",0),p.html(f),h.maybeHideFavoritesCategory()}function a(){u.favorite=!0,f+=1,d.values(u),v(),n.data("data-favorite",1),p.html(f),h.maybeHideFavoritesCategory()}let s=g(this),r=s.hasClass("fa-heart-o"),o=s.closest(".wpforms-template-favorite"),l=s.closest(".wpforms-template"),n=l.find(".wpforms-template-name"),i=l.find(".wpforms-template-select").data("slug"),m=g(".wpforms-setup-templates-categories").find("[data-category='favorites']"),p=m.find("span"),f=parseInt(p.html(),10),c={action:"wpforms_templates_favorite",slug:i,favorite:r,nonce:wpforms_form_templates.nonce},d=w.templateList.get("slug",i)[0],u=d.values(),v=function(){o.find(".fa-heart-o").toggleClass("wpforms-hidden",u.favorite),o.find(".fa-heart").toggleClass("wpforms-hidden",!u.favorite)};g.post(wpforms_form_templates.ajaxurl,c,function(e){e.success||(r?t:a)()}),(r?a:t)()},maybeHideFavoritesCategory:function(){var e=g(".wpforms-setup-templates-categories"),t=e.find("[data-category='favorites']"),a=parseInt(t.find("span").html(),10);t.toggleClass("wpforms-hidden",!a),t.hasClass("active")&&(a?t:e.find("[data-category='all']")).trigger("click")},searchTemplate:function(e){h.performSearch(g(this).val()),h.showUpgradeBanner()},performSearch(e){e=w.templateList.search(e);g(".wpforms-templates-no-results").toggle(!e.length)},selectCategory:function(e){e.preventDefault();let t=g(this),a=t.closest("ul").find(".active"),s=t.data("category"),r=g("#wpforms-setup-template-search").val();a.removeClass("active"),t.addClass("active"),w.templateList.filter(function(e){return"available"===s?e.values()["has-access"]:"favorites"===s?e.values().favorite:"all"===s||-1<e.values().categories.split(",").indexOf(s)}),""!==r&&h.performSearch(r),h.showUpgradeBanner()},selectTemplateCancel:function(){var e=g("#wpforms-setup-templates-list").find(".wpforms-template.active"),t=e.find(".wpforms-template-select");e.removeClass("active"),t.html(t.data("labelOriginal"))},showUpgradeBanner:function(){var e,t;g("#tmpl-wpforms-templates-upgrade-banner").length&&(e=wp.template("wpforms-templates-upgrade-banner"))&&(5<(t=g("#wpforms-setup-templates-list .wpforms-template")).length?t.eq(5):t.last()).after(e())}};return h}((document,window),jQuery);WPFormsFormTemplates.init();